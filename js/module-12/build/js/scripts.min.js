"use strict";var template=document.querySelector(".js-template"),listCards=document.querySelector(".js-list-cards"),input=document.querySelector(".js-form input[type=text]"),form=document.querySelector(".js-form"),source=template.innerHTML.trim(),temp=Handlebars.compile(source);function handleDelBtn(e){e.preventDefault();var t=document.querySelector(".js-li-url");"BUTTON"===e.target.nodeName&&(localStorage.removeItem(t.name),e.target.parentElement.parentElement.remove())}function handleFormSubmit(e){e.preventDefault();if(!/^((ftp|http|https):\/\/)?(www\.|)([A-z|0-9]+)\.([A-z]{2,})/.test(input.value))return input.parentNode.reset(),alert("URL is invalid! Try again.");fetch("https://api.linkpreview.net/?key=5bd2be4683f4df4868c2be896cecac30712acbad1b051&q=".concat(input.value)).then(function(e){if(e.ok)return e.json()}).then(function(e){if(null!==localStorage.getItem(e.url))return alert("This URL already exists!");localStorage.setItem(e.url,e.url);var t=temp(e);listCards.insertAdjacentHTML("afterbegin",t)}).catch(function(e){return console.error(e)}),input.parentNode.reset()}Object.keys(localStorage).forEach(function(e){fetch("https://api.linkpreview.net/?key=5bd2be4683f4df4868c2be896cecac30712acbad1b051&q=".concat(e)).then(function(e){if(e.ok)return e.json()}).then(function(e){listCards.insertAdjacentHTML("afterbegin",temp(e))}).catch(function(e){return console.error(e)})}),form.addEventListener("submit",handleFormSubmit),listCards.addEventListener("click",handleDelBtn);